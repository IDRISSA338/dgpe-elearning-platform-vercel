<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Mes modules – DGPE</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
  <div class="wrap">
    <div class="logo-group">
      <img src="assets/img/dgpe-logo.png" class="logo">
      <span class="brand">e-Learning</span>
    </div>
    <nav class="nav">
      <a href="index.html">Accueil</a>
      <a href="catalogue.html">Catalogue</a>
      <a href="modules.html" class="active">Modules</a>
      <a href="dashboard.html">Dashboard</a>
    </nav>
  </div>
</header>

<main class="page">
  <section class="panel">
    <h2>Mes modules</h2>
    <div id="myModules" class="modules-grid"></div>
  </section>
</main>

<footer class="footer">© 2025 DGPE</footer>

<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
const supabase = createClient("https://rwjyxmzdwdddjaeghpae.supabase.co",
"sb_publishable_GbNaiadaYRtF0WhOjiPp2w_ww7jVANw");

const { data:{ user }} = await supabase.auth.getUser();
const { data } = await supabase
  .from("inscriptions")
  .select("modules(*)")
  .eq("user_id", user.id);

document.getElementById("myModules").innerHTML =
  data.map(i => `
    <a href="module.html?id=${i.modules.id}" class="card">
      <h3>${i.modules.titre}</h3>
    </a>`).join("");
</script>

</body>
</html>
